<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ProfitShade FX - Trade Smart, Profit Sharp</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <style>
    body {
      background-color: #0d0d0d;
      color: #f0f0f0;
      font-family: 'Segoe UI', sans-serif;
    }
    .navbar {
      background-color: #1f1f2e;
    }
    .nav-link, .navbar-brand {
      color: #fdd835;
    }
    .nav-link:hover {
      color: #ffffff;
    }
    .section {
      padding: 60px 20px;
    }
    footer {
      background-color: #1f1f2e;
      color: #aaa;
      padding: 20px 0;
      text-align: center;
    }
    footer a {
      color: #fdd835;
      text-decoration: none;
    }
    footer a:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>

<!-- Access Gateway -->
<div id="access-gateway" class="section text-center">
  <h2 class="text-warning">🔐 Welcome to ProfitShade</h2>
  <p class="text-light">Please log in to your Deriv account or create one to access tools.</p>
  <a href="https://deriv.com/signup?sidc=F29079D3-31B8-4321-8A5B-0B13DBD26761" class="btn btn-warning" target="_blank">✍️ Create Free Account</a>
  <br><br>
  <button onclick="grantAccess()" class="btn btn-success">🚀 I've Logged In — Continue</button>
</div>

<!-- API Token Login -->
<div id="token-login" class="section text-center" style="display:none;">
  <h4 class="text-warning">🔑 Connect Your Deriv API Token</h4>
  <input type="text" id="apiToken" placeholder="Paste API Token" class="form-control w-50 mx-auto mb-3" />
  <button onclick="connectToken()" class="btn btn-outline-warning">🔗 Connect</button>
  <p id="loginStatus" class="mt-3 text-info"></p>
  <p><small><a href="https://app.deriv.com/account/api-token" target="_blank">Where to get your token?</a></small></p>
</div>

<!-- Main App -->
<div id="main-app" style="display:none;">
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">PROFITSHADE_FX</a>
      <ul class="navbar-nav ms-auto">
        <li class="nav-item"><a class="nav-link" href="#" onclick="showSection('dashboard')">Dashboard</a></li>
        <li class="nav-item"><a class="nav-link" href="#" onclick="showSection('botbuilder')">Bot Builder</a></li>
        <li class="nav-item"><a class="nav-link" href="#" onclick="showSection('strategies')">Strategies</a></li>
        <li class="nav-item"><a class="nav-link" href="#" onclick="showSection('risk')">Risk Calculator</a></li>
        <li class="nav-item"><a class="nav-link" href="#" onclick="showSection('charts')">Charts</a></li>
        <li class="nav-item"><a class="nav-link" href="#" onclick="showSection('contact')">Contact</a></li>
      </ul>
    </div>
  </nav>

  <!-- Dashboard -->
  <section class="section" id="dashboard">
    <div class="container text-center">
      <h2 class="text-warning">📊 Dashboard</h2>
      <p>Balance: <span id="balance">$0.00</span> | Trades: <span id="trades">0</span> | Profit: <span id="profit">$0.00</span></p>
      <button class="btn btn-outline-light" onclick="refreshDashboard()">🔄 Refresh</button>
    </div>
  </section>

  <!-- Bot Builder -->
  <section class="section" id="botbuilder" style="display:none;">
    <div class="container text-center">
      <h2 class="text-warning">🤖 Bot Builder</h2>
      <p>Login to Deriv first before loading bots.</p>
      <iframe id="botBuilderIframe" src="https://app.deriv.com/bot" width="100%" height="600" style="border:1px solid #444; border-radius:10px;"></iframe>
    </div>
  </section>

  <!-- Strategies -->
  <section class="section" id="strategies" style="display:none;">
    <div class="container">
      <h2 class="text-warning">📘 Strategies</h2>
      <p>Even/Odd, Over/Under, Matches/Differs, and Rise/Fall strategies will be listed here.</p>
    </div>
  </section>

  <!-- Risk Calculator -->
  <section class="section" id="risk" style="display:none;">
    <div class="container">
      <h2 class="text-warning">📉 Martingale Risk Calculator</h2>
      <form oninput="calcMartingale()">
        <input id="capital" placeholder="Capital ($)" type="number" class="form-control mb-2" />
        <input id="initial" placeholder="Initial Stake ($)" type="number" class="form-control mb-2" />
        <input id="levels" placeholder="Martingale Levels" type="number" class="form-control mb-3" />
        <div class="alert alert-dark">
          <ul id="stakeList"></ul>
          <p>Total Risk: <span id="totalRisk">$0.00</span></p>
          <p>Remaining: <span id="remaining">$0.00</span></p>
        </div>
      </form>
    </div>
  </section>

  <!-- Charts -->
  <section class="section" id="charts" style="display:none;">
    <div class="container text-center">
      <h2 class="text-warning">📈 Charts</h2>
      <p>Live Deriv charts or iframe will go here (coming soon).</p>
    </div>
  </section>

  <!-- Contact -->
  <section class="section" id="contact" style="display:none;">
    <div class="container text-center">
      <h2 class="text-warning">📞 Contact</h2>
      <p>Join us:</p>
      <a href="https://t.me/+ihdGiMFSFb42ODhk" class="btn btn-outline-info m-1">Telegram</a>
      <a href="https://whatsapp.com/channel/0029VbAHOD24IBhMjykDfE1E" class="btn btn-outline-success m-1">WhatsApp</a>
    </div>
  </section>
</div>

<!-- Footer -->
<footer>
  <div class="container">
    <p>© 2025 ProfitShade FX. Designed by Agustine. <a href="https://deriv.com/signup?sidc=F29079D3-31B8-4321-8A5B-0B13DBD26761">Sign Up</a></p>
  </div>
</footer>

<!-- SCRIPTS -->
<script>
function grantAccess() {
  localStorage.setItem("user_access", "true");
  document.getElementById("access-gateway").style.display = "none";
  document.getElementById("token-login").style.display = "block";
}

function connectToken() {
  const token = document.getElementById("apiToken").value.trim();
  if (!token) return document.getElementById("loginStatus").innerText = "❌ Enter your API token.";
  const ws = new WebSocket("wss://ws.deriv.com/websockets/v3");
  ws.onopen = () => ws.send(JSON.stringify({ authorize: token }));
  ws.onmessage = msg => {
    const data = JSON.parse(msg.data);
    if (data.msg_type === "authorize") {
      localStorage.setItem("deriv_token", token);
      document.getElementById("loginStatus").innerHTML =
        `✅ Welcome <strong>${data.authorize.loginid}</strong> | Balance: ${data.authorize.balance}`;
      document.getElementById("token-login").style.display = "none";
      document.getElementById("main-app").style.display = "block";
      refreshDashboard();
    } else {
      document.getElementById("loginStatus").innerText = "❌ Invalid token.";
    }
  };
}

function refreshDashboard() {
  const balance = (Math.random() * 100 + 10).toFixed(2);
  const trades = Math.floor(Math.random() * 100);
  const profit = (Math.random() * 50 - 10).toFixed(2);
  document.getElementById("balance").textContent = `$${balance}`;
  document.getElementById("trades").textContent = trades;
  document.getElementById("profit").textContent = (profit > 0 ? "+" : "") + `$${profit}`;
}

function calcMartingale() {
  const capital = parseFloat(document.getElementById("capital").value) || 0;
  const initial = parseFloat(document.getElementById("initial").value) || 0;
  const levels = parseInt(document.getElementById("levels").value) || 0;
  let stakeList = document.getElementById("stakeList");
  stakeList.innerHTML = "";
  let totalRisk = 0;
  for (let i = 0; i < levels; i++) {
    const stake = initial * Math.pow(2, i);
    totalRisk += stake;
    const li = document.createElement("li");
    li.textContent = `Level ${i + 1}: $${stake.toFixed(2)}`;
    stakeList.appendChild(li);
  }
  const remaining = capital - totalRisk;
  document.getElementById("totalRisk").textContent = `$${totalRisk.toFixed(2)}`;
  document.getElementById("remaining").textContent = `$${remaining.toFixed(2)}`;
}

function showSection(id) {
  document.querySelectorAll('.section').forEach(sec => sec.style.display = 'none');
  document.getElementById(id).style.display = 'block';
  window.scrollTo(0, 0);
}

window.addEventListener("DOMContentLoaded", function () {
  if (localStorage.getItem("user_access") === "true") {
    document.getElementById("access-gateway").style.display = "none";
    document.getElementById("token-login").style.display = "block";
  }
});
</script>

</body>
</html>
